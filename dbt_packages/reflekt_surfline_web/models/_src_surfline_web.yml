version: 2
sources:
  - name: surfline
    database: segment
    description: Schema in Redshift where data for the surfline-web Segment
      source is stored.
    tables:
      - name: identifies
        description: A table with identify() calls.
      - name: users
        description: A table with the latest traits for users.
      - name: pages
        description: A table with page() calls.
      - name: tracks
        description: A table with track() event calls.
      - name: accepted_subscription_offer
        description: Server side event fired when a user redeems a yearly
          upgrade promotion (via www.surfline.com/yearlyupgrade).
      - name: account_created
        description: Server side event fired when an account is created
          and sent from our internal system. Used for all 3 platforms (web,
          iOS, android).
      - name: added_card
        description: Server side event fired when a user adds a debit/credit
          card for payment.
      - name: added_product
        description: Web event fired when a user makes a product selection
          (monthly, yearly) from the dropdown in our funnel.
      - name: added_session
        description: Server side event fired when a user adds a Surfline
          Session.
      - name: booking_completed
        description: Fired when a user completes a travel booking.
      - name: cancelled_free_trial
        description: Server event fired when a user has their free trialing
          subscription cancelled.
      - name: cancelled_subscription
        description: Server event triggered when an active, non-trialing,
          subscription is scheduled to cancel at the end of an auto-billing
          cycle determined by the billing interval.
      - name: carousel_clicked
        description: Fired when a clicks inside any carousel (e.g. in the
          Booking Layer Travel Carousel).
      - name: changed_cam_selection
        description: Web event fired when a user adds or changes a surf
          camera (from favorites) on the multi-cam page.
      - name: changed_home_cam
        description: Web event fired when a user changes their home cam.
      - name: changed_subscription_plan
        description: Server-side event that is triggered by any billing
          platform (Stripe, Google, Apple) when an active subscription billing
          interval is changed to a different billing interval.
      - name: checkout_session_completed
        description: Server side event fired when a user completes a Stripe
          Checkout Session. Session Object Reference - https://stripe.com/docs/api/checkout/sessions/object
      - name: checkout_session_expired
        description: Server side event fired when a Stripe Checkout Session
          expires. Session Object Reference - https://stripe.com/docs/api/checkout/sessions/object
      - name: clicked_add_credit_debit_card
        description: Web event fired when a user adds a credit or debit
          card for payment.
      - name: clicked_add_favorites
        description: Web event fired when a user clicks "Add Favorites"
          from the favorites bar.
      - name: clicked_article_page_link
        description: Web event fired when a user clicks a local headlines
          article link.
      - name: clicked_cam_rewind
        description: Web event fired when a user click the cam rewind button
          on a surf camera.
      - name: clicked_cancel_your_subscription
        description: Web event fired when a user clicks to cancel their
          subscription.
      - name: clicked_cancelled_subscription
        description: Web event fired when a user received a successful response
          for cancelling a subscription.
      - name: clicked_change_home_cam
        description: Web event fired when a user clicks to bring up the
          home cam selection menu.
      - name: clicked_changed_subscription_plan
        description: Web event fired when a user clicks on the change plan
          option..
      - name: clicked_clip_selector
        description: When the user clicks a clip tile on the cam rewind
          page.
      - name: clicked_create_account
        description: Web event fired when a user submits the Create Account
          form.
      - name: clicked_cta
        description: Web event fired when a user clicks a CTA
      - name: clicked_edit_profile
        description: Web event fired when a user clicks to edit their profile.
      - name: clicked_favorite
        description: Web event fired when a user clicks on one of their
          favorite spots from the favorites bar.
      - name: clicked_forecast_range
        description: Web event fired when a user clicks to change the forecast
          date range on a spot report page.
      - name: clicked_get_pass
        description: Web event fired when a user clicks the 1st "GET PASS"
          to get a California Explorer Pass on the http://caexplorer.surfline.com/products/california-explorer
          page.
      - name: clicked_home_feed_link
        description: Web event fired when a user clicks an article link
          from the home page.
      - name: clicked_link
        description: Web event fired when a user clicks a page link.
      - name: clicked_load_more
        description: Web event fired when a user clicks
      - name: clicked_main_nav
        description: Web event fired when a user accesses a page/link through
          the main navigation menu (Cams & Reports, Forecasts, News).
      - name: clicked_nearby_buoy
        description: Web event fired when a user clicks "Nearby Buoys" dropdown
          on a surf report page.
      - name: clicked_nearby_spot
        description: Web event fired when a user selects a spot from the
          "Nearby Spots" dropdown or from the nearby spot carousel below
          a surf cam on a surf report page.
      - name: clicked_nearby_subregion
        description: Web event fired when a user selects a subregion from
          the "Nearby Regions" dropdown on a Regional Forecast page (Includes
          Regional Forecast, Premium Analysis, and Charts tabs).
      - name: clicked_no_thanks
        description: Web event fired when a user chooses not to provide
          a reason for canceling their subscription.
      - name: clicked_popup
        description: Web event fired when a user clicks on a popup.
      - name: clicked_promotion
        description: Web event fired when any utm_* tracking parameters
          are detected in the URL.
      - name: clicked_renew_subscription
        description: Web event fired when a user clicks to renew their subscription.
      - name: clicked_save
        description: Web event fired when a user clicks to save the changes
          made to their account profile.
      - name: clicked_scrubber_player
        description: Web event fired when a user clicks rewind/play/fast-forward
          on a chart player (e.g. High Res Wind).
      - name: clicked_search_results
        description: Web event fired when a user clicks a returned search
          result from generated from the search bar.
      - name: clicked_set_region
        description: Web event fired when a user changes their region on
          the homepage (e.g. North San Diego --> Gold Coast). This can only
          be changed if a user has favorites in >1 region.
      - name: clicked_share_icon
        description: Web event fired when a user clicks a share link (Facebook,
          Twitter, copy link) on a page.
      - name: clicked_skip
        description: Web event fired when a user clicks to skip an onboarding
          message.
      - name: clicked_spot_page_feed_link
        description: Web event fired when a user clicks a link in the feed
          shown on a spot page (e.g., Featured Content article link).
      - name: clicked_state_park_map_pin
        description: Web event fired when a user clicks on a State Park
          pin on the map on the California Explorer pass page.
      - name: clicked_subscribe_cta
        description: Web event fired when a user clicks a Call to Action
          (CTA) encouraging them to subscribe or start a free trial.
      - name: clicked_swell_alert_card
        description: Web event fired when a user clicks a Swell Alert card.
      - name: clicked_swell_alert_link
        description: Web event fired when a user clicks a Swell Alert link.
      - name: clicked_switched_to_yearly
        description: Web event fired when a monthly user clicks to switch
          to yearly.
      - name: clicked_update_password
        description: Web event fired when a user updates their account password.
      - name: closed_cam
        description: Web event fired when a user closes the mini-cam player
          on a page.
      - name: closed_home_cam
        description: Web event fired when a user closes the mini-cam player
          for their homecam.
      - name: completed_checkout_step
        description: Web event fired when a user completes step 2 of the
          subscription funnel.
      - name: completed_favorites_wizard_questionnaire
        description: Client side event fired when a user completes the Onboarding
          Wizard Questionnaire.'
      - name: completed_order_gift_purchase
        description: Web event fired when a user completes an order for
          a gift purchase.
      - name: completed_order
        description: 'Web event fired when a user completes the final step
          in the subscription funnel (started free trial or direct subscription).

          This client-side event is analogous to the `Order Completed` event
          outlined in the Segment Ecommerce docs (https://segment.com/docs/connections/spec/ecommerce/v2/#order-completed).'
      - name: connected_account
        description: Server side event fired when a user connects a 3rd
          party account (Garmin, Rip Curl, Amazon Alexa, Dawn Patrol).
      - name: contest_form_submitted
        description: Web event fired when a user enters the Wave of the
          Winter contest.
      - name: continued_to_cancel
        description: Web event fired when a user clicks to continue canceling
          their subscription on the cancel funnel landing page.
      - name: converted_free_trial
        description: Server event fired when a user has their free trialing
          subscription converted to a paid autorenewing subscription.
      - name: converted_to_paid
        description: Server side event fired when a user converts from a
          free trial to a paid subscription.
      - name: create_account_form_clicked_sign_in
        description: Web event fired when a user clicks "Sign in" from the
          create account page.
      - name: days_to_convert_from_trial
        description: "Server side event fired 7 days before a users free\
          \ trial is set to convert. Sent with properties:\n  - daysToPremium\n\
          \  - cardType.\nWe'll use the daysToPremium property in the email\
          \ text to the user, this will allow us to change the timing of\
          \ this reminder in Stripe without having to change the email.\
          \ The cardType will be used in customer.io to make sure we only\
          \ send reminders to users with a VISA card. We should only send\
          \ this event if users are converting from a trial to a subscription\
          \ (and have not canceled).\n"
      - name: deleted_account
        description: Server-side event fired when a user's account is deleted.
      - name: detected_ad_blocker
        description: Web event fired when a user lands on a Surfline page
          and we detect an Ad blocker.
      - name: discount_code_dispatched
        description: Server side event when we generate a discount code.
      - name: dissociated_stripe_customer
        description: Server-side event fired when a Wavetrak User Account
          is unlinked from their respective Stripe Customer object reference.
          Triggered by the Subscription-Service via request from the Wavetrak
          Admin tools only.
      - name: edited_favorites
        description: Server side event fired when a user adds, modifies
          or deletes favorites.
      - name: enriched_session
        description: Server side event fired when a Session gets added weather,
          surf, and other details.
      - name: expired_subscription
        description: Server event that is triggered by any billing platform
          (Stripe, Google, Apple) when the active or expiring subscription
          is terminated.
      - name: extended_subscription
        description: Server side event fired when a subscription is extended
          and payment is processed successfully.
      - name: failed_payment_recovered
        description: Server side event fired when a subscription payment
          that previously failed is processed successfully.
      - name: failed_payment
        description: Server side event fired when a subscription payment
          fails.
      - name: focused_search
        description: Web event fired when a user clicks the search bar.
      - name: generated_gift_card
        description: Server side event when we generate a gift card.
      - name: generated_promo_code
        description: Server side event when we generate a promo code.
      - name: invalid_email_forgot_password
        description: Web event fired when a user tries to login but the
          email provided is not associated with an account.
      - name: invalid_forgot_password_reset_code
        description: Server side event fired when the password is reset
          for an account after requested by the user during a failed login.
      - name: issued_perk_code
        description: Server side event that sends when a user redeems a
          perk code.
      - name: kept_account
        description: Web event fired when a user opts to keep their account
          after trying to cancel.
      - name: open_home_cam
        description: Web event fired when a user opens their home camera
          in the mini-player.
      - name: opened_cam
        description: Web event fired when a user opens a camera in the mini-player.
      - name: order_completed
        description: Server-side event fired when a user completes the final
          step in the subscription funnel (free-trial or direct subscription).
      - name: played_webcam
        description: Client Side [Web] event fires when a webcam autoplays
          or when a webcam starts playing as a result of a user clicking
          the play button. Note - this event could fire when the cam player
          experiences buffering issues and/or the user minimizes/switches
          browser windows (other edge case scenarios possible).
      - name: purchased_gift_card
        description: Server side event fired when a user purchases a gift
          card.
      - name: redeemed_gift_card
        description: Server side event fired when a user redeems a gift
          card.
      - name: redirected_link
        description: Web event fired when a user clicks a redirect link
          (tracks hits for Ad Operations client campaigns).
      - name: requested_email_verification
        description: Server side event fired when a user requests a new
          verification (resend) email.
      - name: requested_forgot_password_email
        description: Server side event fired when a user requests an email
          to reset their password.
      - name: saved_clip
        description: When the user clicks save clip on the cam rewind page.
      - name: saved_unit
        description: Web event fired when a user updates their preferred
          units for forecast metrics (e.g., swell height in feet or meters)
          or toggles their preferred model (LOLA/LOTUS).
      - name: scrolled_feed
        description: Web event fired when a user scrolls the feed of articles/links
          on the home page or news page, which triggers more articles/links
          to load at the bottom of the page.
      - name: selected_favorites
        description: Web event fired when a user selects favorite spots
          during onboarding.
      - name: served_popup
        description: Web event fired when a user is served a popup on a
          page.
      - name: set_new_password
        description: Server side event sent when a user creates a new password.
      - name: sign_in_form_clicked_create_account
        description: Web event fired when a user clicks "Sign Up" from the
          sign-in page.
      - name: signed_in
        description: Web event fired when a user successfully signs in.
      - name: signed_out
        description: Fired when a user signs out.
      - name: signed_up
        description: Server side event fired when a user signs up for non-trialing
          subscription (direct) from Stripe.
      - name: started_free_trial
        description: Server side event fired when a user starts a free trial.
      - name: started_subscription
        description: Triggered when an active, non-trialing, subscription
          is created and immediately enters an auto-billing cycle determined
          by the billing interval.
      - name: stopped_webcam
        description: Client side event fired when a user stops a webcam
          by hitting pause, or leaving the spot page. Note - this event
          could fire when the cam player experiences buffering issues and/or
          the user minimizes/switches browser windows (other edge case scenarios
          possible).
      - name: submitted_cancel_survey
        description: Web event fired when a user submits a cancellation
          survey.
      - name: subscription_grandfathered
        description: Server side event when a subscription is grandfathered
          in Stripe.  '
      - name: subscription_receipt_received
        description: Client side event when a subscription has been confirmed.
      - name: subscription_renewed
        description: Triggered when an active subscription billing dates
          are changed.
      - name: succeeded_payment
        description: Server side event fired when a subscription payment
          is successful with Stripe.
      - name: surf_checks_reset
        description: Server side event fired when a users surf checks reset
          to the maximum allowed surf check amount.
      - name: toggled_cam_view
        description: Web event fired when a user toggles a surf camera view.
      - name: toggled_forecast_view
        description: Web event fired when a user toggles the forecast view
          from chart to table.
      - name: toggled_spot_forecast
        description: Web event fired when a user toggles the spot report
          view from chart to table.
      - name: tracked_link
        description: Web event fired when a user clicks a link for the photos
          section.
      - name: upcoming_subscription_renewal
        description: Server side event fired 7 days before a subscription
          is set to renew. Required by credit card payment processor.
      - name: used_surf_check
        description: Server side event fired when a user has consumed 1
          surf check.
      - name: verified_email
        description: Server side event fired when a user successfully verifies
          their email.
      - name: viewed_checkout_step
        description: Web event fired when a user hits the checkout step
          of the funnel.
      - name: viewed_contest_entry
        description: Web event fired when a user views a contest entry.
      - name: viewed_gift_purchase_step
        description: Web event fired when a user views the Surfline Premium
          gift purchase page.
      - name: viewed_product
        description: Google Analytics essential event. Web event that is
          fired when a user reaches the http://caexplorer.surfline.com/products/california-explorer
          page.
      - name: viewed_redeem_step
        description: Web event fired when a user views the "Redeem Your
          Gift" page.
